### Networks

Networks are provisioned to be able to control data flow to instances. To communicate with the external network, the network must be connected to a [router](#openstack-routers).

#### List networks

```shell
curl -H "MC-Api-Key: your_api_key" \
    "https://portal.coxedge.com/api/v2/services/compute-os/devel/networks"
```
> The above command returns a JSON structured like this:

```json
{
    "data": [
        {
            "id": "a9e8861d-64a1-4126-b385-6e4db9a5814f",
            "name": "default",
            "enabled": true,
            "external": false,
            "gateway": "10.55.84.1",
            "cidr": "10.55.84.0/22",
            "dhcpEnabled":true,
            "ipVersion": "V4",
            "subnetId": "bda27442-f6c8-4033-84f0-ffcf319228a4"        
        }
    ],
    "metadata": {
        "recordCount": 1
    }
}
```

<code>GET /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/networks</code>

Retrieve a list of all networks in an environment.

| Attribute                  | Description                          |
| -------------------------- | ------------------------------------ |
| `id`<br/>*UUID*            | The network's id.                    |
| `name`<br/>*string*        | The network's name.                  |
| `enabled`<br/>*boolean*    | If the network is enabled.           |
| `external`<br/>*boolean*   | If the network is accessible from the external.|
| `gateway`<br/>*string*     | The IP of the gateway.               |
| `cidr`<br/>*string*        | CIDR of the network.                 |
| `dhcpEnabled`<br/>*boolean*| If DHCP is handled by the network.   |
| `ipVersion`<br/>*string*   | V4 or V6.                            |
| `subnetId`<br/>*string*    | The id of the OpenStack subnet it maps to.|

#### Retrieve a network

```shell
curl -H "MC-Api-Key: your_api_key" \
    "https://portal.coxedge.com/api/v2/services/compute-os/devel/networks/a9e8861d-64a1-4126-b385-6e4db9a5814f"
```
> The above command returns a JSON structured like this:

```json
{
    "data": {
        "id": "a9e8861d-64a1-4126-b385-6e4db9a5814f",
        "name": "default",
        "enabled": true,
        "external": false,
        "gateway": "10.55.84.1",
        "cidr": "10.55.84.0/22",
        "dhcpEnabled":true,
        "ipVersion": "V4",
        "subnetId": "bda27442-f6c8-4033-84f0-ffcf319228a4"        
    }
}
```

<code>GET /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/networks/:id</code>

Retrieve information about a network.

| Attribute                  | Description                          |
| -------------------------- | ------------------------------------ |
| `id`<br/>*UUID*            | The network's id.                    |
| `name`<br/>*string*        | The network's name.                  |
| `enabled`<br/>*boolean*    | If the network is enabled.           |
| `external`<br/>*boolean*   | If the network is accessible from the external.|
| `gateway`<br/>*string*     | The IP of the gateway.               |
| `cidr`<br/>*string*        | CIDR of the network.                 |
| `dhcpEnabled`<br/>*boolean*| If DHCP is handled by the network.   |
| `ipVersion`<br/>*string*   | V4 or V6.                            |
| `subnetId`<br/>*string*    | The id of the OpenStack subnet it maps to.|

#### Create a network

```shell
curl -X POST \
    -H "MC-Api-Key: your_api_key" \
    -H "Content-Type: application/json" \
    -d "request_body" \
    "https://portal.coxedge.com/api/v2/services/compute-os/devel/networks"
```
> Request body example:

```json
{
    "name": "web",
    "cidr": "10.50.0.0/22",
    "dhcpEnabled":true
}
```

<code>POST /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/networks</code>

Create a network in an environment.

Optional | &nbsp;
------ | -----------
`name`<br/>*string* | Name of the network
`cidr`<br/>*string* | The CIDR of the network. The mask should be between 1 and 30 inclusively. Example: 10.50.0.0/22
`dhcpEnabled`<br/>*boolean* | If DHCP should be enabled for the network or if it will be handled by the user
`routerId`<br/>*string* | The id of an existing router. If provided, it will create an interface on that router for the created network. It may not be provided with `externalNetworkId`
`externalNetworkId`<br/>*string* | The id of the external network. If provided, it will create a router connected to that external network and add an interface on that router for the created network. It may not be provided with `routerId`

N.B.: The `name` and `cidr` will be autogenerated if left blank. `dhcpEnabled` will default to `false`

#### Delete a network

```shell
curl -X DELETE \
    -H "MC-Api-Key: your_api_key" \
    "https://portal.coxedge.com/api/v2/services/compute-os/devel/networks/a9e8861d-64a1-4126-b385-6e4db9a5814f"
```

<code>DELETE /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/networks/:id</code>

Delete a network.
